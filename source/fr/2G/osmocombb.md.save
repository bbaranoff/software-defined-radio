[English](../../en/2G/osmocombb.md)

# OsmocomBB

**OsmocomBB** (Osmocom Baseband) est un projet open source qui impl√©mente une pile GSM ‚Äúbaseband‚Äù pour certains t√©l√©phones Motorola et des configurations SDR.

## Qu‚Äôest-ce qu‚ÄôOsmocomBB‚ÄØ?

- **Pile protocolaire GSM c√¥t√© mobile (MS, mobile station)**
- Remplace le firmware d‚Äôorigine pour donner acc√®s aux couches GSM 1/2/3, journalisation des protocoles, sniffing et tests
- Utilisations‚ÄØ: analyse, tests de s√©curit√©, recherche acad√©mique, IMSI catchers, fuzzing radio

## Architecture

- **host/osmocon**‚ÄØ: Outil de chargement du firmware sur les appareils compatibles
- **src/host/layer23**‚ÄØ: Pile GSM s‚Äôex√©cutant sur le PC (appels, SMS, sniffing, capture de bursts, etc.)
- **firmware/**‚ÄØ: Code baseband √† flasher sur les t√©l√©phones compatibles

## Mat√©riel support√©

- **S√©rie Motorola C1xx (C123, C118, C155, etc.)**
- Certains autres mod√®les √† chipset ‚ÄúCalypso‚Äù

## Cas d‚Äôusage & limitations

- Peut se connecter √† une vraie cellule 2G ou √† une BTS Osmocom (osmo-bts-trx)
- Limit√© √† la 2G pure (pas de support 3G/4G)
- **Attention‚ÄØ:** √âmettre sans licence est ill√©gal‚ÄØ!  
  N‚Äôutilisez que pour la recherche ou en environnement contr√¥l√©.

## Liens utiles

- [D√©p√¥t GitHub OsmocomBB](https://github.com/osmocom/osmocom-bb)
- [Wiki officiel](https://osmocom.org/projects/baseband/wiki/OsmocomBB)
- [Guide d‚Äôinstallation (FR)](https://www.lafabriquedunet.fr/blog/osmocombb-guide/)

---

**Pour SDR‚ÄØ:** Un projet exp√©rimental existe pour connecter OsmocomBB √† un SDR (BladeRF, HackRF, etc.) via l‚Äôinterface ‚Äúvirtual layer1‚Äù.

## üõ∞Ô∏è OsmocomBB Calypso BTS ‚Äì Ubuntu 24.04 (C115/C118/C123 + PL2303)

## **Mat√©riel requis**

* 2x Motorola C1xx (C115, C118, C123‚Ä¶ chipset Calypso)
* 2x C√¢bles USB-s√©rie jack 2.5‚ÄØmm (PL2303/FTDI)
* Ubuntu 24.04 x86\_64 (VM ou natif)
* Acc√®s root

---

## **1. D√©pendances syst√®me**

```bash
sudo apt update
sudo apt install -y \
  build-essential git cmake pkg-config autoconf automake libtool shtool \
  bison flex libtalloc-dev libpcsclite-dev zlib1g-dev libmpfr-dev libmpc-dev \
  libgmp-dev libncurses5-dev libncursesw5-dev libsofia-sip-ua-dev libxml2-dev \
  libfftw3-dev libgnutls28-dev libssl-dev python3 python3-pip \
  alsa-oss lemon libtinfo-dev
```

> **Note**‚ÄØ: Ubuntu 24.04 a GCC‚ÄØ13+ par d√©faut, mais il faut parfois cross-compiler avec GCC 4.9 pour le firmware Calypso. S‚Äôil existe des binaires arm-elf pr√©compil√©s pour Ubuntu 22.04, ils fonctionnent aussi sous 24.04.
> Pour l‚ÄôARM toolchain, voir plus bas (utilise de pr√©f√©rence un container/VM si souci d‚Äôincompatibilit√©).

---

## **2. Installer la toolchain ARM-elf (cross-compiler Calypso)**

### **Option A‚ÄØ: T√©l√©chargement direct (pr√™t √† l‚Äôemploi)**

```bash
# Depuis Osmocom (pr√©conis√©‚ÄØ: ne pas compiler vous-m√™me sous Ubuntu r√©cent)
cd /opt
sudo wget https://downloads.osmocom.org/binaries/toolchain/arm-2021.03.tar.bz2
sudo tar -xjf arm-2021.03.tar.bz2
export PATH=$PATH:/opt/arm-2021.03/bin
```

> **Ajoute l‚Äôexport PATH √† ton .bashrc pour persistance**

### **Option B‚ÄØ: Compilation manuelle**

> (non recommand√© sur Ubuntu 24.04, c‚Äôest lent et casse souvent, pr√©f√®re la m√©thode ci-dessus)

---

## **3. Compiler et installer OsmocomBB**

```bash
# 1. Cloner les sources
git clone https://github.com/osmocom/osmocom-bb.git
cd osmocom-bb

# 2. Pr√©parer le build
cd src
autoreconf -i

# 3. Compiler le firmware (sp√©cifie la toolchain si besoin)
export PATH=$PATH:/opt/arm-2021.03/bin
./configure
make -j$(nproc)
sudo make install
sudo ldconfig
```

---

## **4. Flasher le firmware sur les t√©l√©phones**

**Connecte les deux t√©l√©phones via USB-PL2303, batterie retir√©e.**

```bash
cd src/host/osmocon
sudo ./osmocon -m c123xor -p /dev/ttyUSB0 -c ../../target/firmware/board/compal_e88/rssi.highram.bin
# (Shell #1¬†: RSSI scan, contr√¥le-C pour arr√™ter)
```

**Trouve un ARFCN actif (fort signal GSM, ex.¬†: 900/1800 MHz).**

```bash
# Pour charger le firmware TRX (BTS)
sudo ./osmocon -m c123xor -p /dev/ttyUSB0 -s /tmp/osmocom_l2 \
  -c ../../target/firmware/board/compal_e88/trx.highram.bin -r 99
sudo ./osmocon -m c123xor -p /dev/ttyUSB1 -s /tmp/osmocom_l2.2 \
  -c ../../target/firmware/board/compal_e88/trx.highram.bin -r 99
```

---

## **5. Lancer le transceiver et la stack BTS**

Dans d‚Äôautres shells‚ÄØ:

```bash
# Shell #3¬†: transceiver Calypso (remplace ARFCN trouv√©)
cd src/host/layer23/src/transceiver/
sudo ./transceiver -a [ARFCN] -2 -r 99

# Shell #4¬†: osmo-nitb (NITB = core minimal)
osmo-nitb -c ~/.osmocom/open-bsc.cfg -l ~/.osmocom/hlr.sqlite3 -P -m -C --debug=DRLL:DCC:DMM:DRR:DRSL:DNM

# Shell #5¬†: osmobts-trx
osmobts-trx -c ~/.osmocom/osmo-bts.cfg -r 99
```

---

## **6. (Optionnel) Installer Asterisk + LCR pour appels SIP**

```bash
sudo apt install -y asterisk asterisk-dev
git clone https://github.com/fairwaves/lcr
cd lcr
autoreconf -i
./configure --with-sip --with-gsm-bs --with-gsm-ms --with-asterisk
make
sudo make install
sudo cp chan_lcr.so /usr/lib/asterisk/modules/
```

Configurer `/etc/asterisk/sip.conf` avec tes identifiants SIP.

---

## **7. V√©rifier le setup et logs**

* V√©rifie les logs dans chaque shell‚ÄØ: recherche ‚Äúregistered‚Äù, ‚Äúattach‚Äù, etc.
* Lancer l‚Äôattachement avec un mobile (SIM Osmocom ou Free avec acc√®s PLMN custom).

---

## **Liens utiles**

* [OsmocomBB Wiki](https://osmocom.org/projects/baseband/wiki)
* [Forum OsmocomBB](https://lists.osmocom.org/mailman/listinfo/baseband-devel)
* [Firmware Toolchain](https://downloads.osmocom.org/binaries/toolchain/)
* [BTS HowTo](https://osmocom.org/projects/baseband/wiki/CalypsoBTS)

